{
    "builders": [
        {
            "type": "virtualbox-iso",
            "iso_checksum": "5b5e08c490ad16b59b1d9fab0def883a",
            "iso_checksum_type": "md5",
            "iso_url": "http://care.dlservice.microsoft.com/dl/download/6/2/A/62A76ABB-9990-4EFC-A4FE-C7D698DAEB96/9600.17050.WINBLUE_REFRESH.140317-1640_X64FRE_SERVER_EVAL_EN-US-IR3_SSS_X64FREE_EN-US_DV9.ISO",
            "floppy_files": [
                "Autounattend.xml",
                "winrm.ps1"
            ],
            "guest_additions_mode": "attach",
            "guest_os_type": "Windows2012_64",
            "shutdown_command": "shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
            "shutdown_timeout": "10m",
            "vboxmanage": [
                [ "modifyvm", "{{.Name}}", "--memory", "2048" ],
                [ "modifyvm", "{{.Name}}", "--cpus", "2" ]
            ],
            "communicator": "winrm",
            "winrm_username": "Fractalsol",
            "winrm_password": "Fractalsol",
            "winrm_timeout": "1h"
        }
    ],
    "provisioners": [
        {
            "type": "powershell",
            "inline": "Get-ChildItem E:\\cert -Filter vbox*.cer | ForEach-Object { E:\\cert\\VBoxCertUtil.exe add-trusted-publisher $_.FullName --root $_.FullName }",
            "elevated_user": "Fractalsol",
            "elevated_password": "Fractalsol"
        },
        {
            "type": "powershell",
            "inline": "Start-Process -FilePath 'e:\\VBoxWindowsAdditions.exe' -ArgumentList '/force /S' -Wait",
            "elevated_user": "Fractalsol",
            "elevated_password": "Fractalsol"
        }
      ],
    "post-processors": [
        {
          "type": "vagrant",
          "keep_input_artifact": true,
          "output": "windows2012r2-primitive-{{.Provider}}.box",
          "vagrantfile_template": "vagrantfile-windows.template"
        }
    ]
}